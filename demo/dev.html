<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div>
        <template id="test">
            <detail>
                <summary></summary>
            </detail>
            <script transform>
                ({
                    '*': i => {
                        i.ctx.matchFirstChild = {
                            '*': i => {
                                i.target.textContent = i.ctx.model.summaryText;
                            },
                        };
                    },

                })
            </script>
        </template>
        <div id="target"></div>
        <script type="module">
            import { init } from '../trans-render-init.js';
            const ctx = {
                model: {
                    summaryText: 'hello'
                }
            };
            init(test, ctx, target);
        </script>


        <template id="Friday">
            It's Friday I'm in love
        </template>
        <template id="Opening">
            <span>I don't care if |.Day1|'s blue</span><br>
            <span>|.Day2|'s gray and |.Day3| too</span><br>
            <span>|.Day4| I don't care about you</span><br>
            <span>It's Friday I'm in love</span>
        </template>
        <template id="Main">
            <div class="UH8R2 opening"></div>
            <div class="UH8R2">
                <span>|.Day6| wait</span><br>
                <span>And |.Day7| always comes too late</span><br>
                <span>But |.Day5| never hesitate</span>
            </div>
            <div class="UH8R2">
                <span>I don't care if |.Day1|'s black</span><br>
                <span>Tuesday, Wednesday heart attack</span><br>
                <span>Thursday never looking back</span><br>
                <span class="Friday"></span>
            </div>
            <div class="UH8R2">
                <span>|.Day1| you can hold your head</span><br>
                <span>|.Day2|, |.Day3| stay in bed</span><br>
                <span>Or |.Day4| watch the walls instead</span><br>
                <span class="Friday"></span>
            </div>
            <div class="UH8R2">
                <span>|.Day6| wait</span><br>
                <span>And |.Day7| always comes too late</span><br>
                <span>But |.Day5| never hesitate</span>
            </div>
            <div class="UH8R2">
                <span>Dressed up to the eyes</span><br>
                <span>It's a wonderful surprise</span><br>
                <span>To see your shoes and your spirits rise</span><br>
                <span>Throwing out your frown</span><br>
                <span>And just smiling at the sound</span><br>
                <span>And as sleek as a shriek</span><br>
                <span>Spinning round and round</span><br>
                <span>Always take a big bite</span><br>
                <span>It's such a gorgeous sight</span><br>
                <span>To see you in the middle of the night</span><br>
                <span>You can never get enough</span><br>
                <span>Enough of this stuff</span><br>
                <span>It's |.Day5|</span><br>
                <span>I'm in love</span>
            </div>
            <div class="UH8R2 opening"></div>
            <div class="UH8R2">
                <span>|.Day1| you can fall apart</span><br>
                <span>|.Day2|, |.Day3| break my heart</span><br>
                <span>|.Day4| doesn't even start</span><br>
                <span class="Friday"></span>
            </div>
            <style>
                .UH8R2{
                padding-top: 20px;
            }
        </style>
            <script transform>
                ({
                    '.opening': ({ctx}) => {
                        ctx.init(Opening, Object.assign({}, ctx), ctx.leaf);
                        ctx.matchFirstChild = true;
                    },

                    'div': ({ctx}) => {
                        ctx.matchFirstChild = {
                            'span': ({ctx}) => {
                                ctx.leaf.textContent = ctx.interpolate(ctx.leaf.innerText, ctx);
                            },
                            '*': ({ctx}) => {
                                ctx.matchNextSib = true;
                            },
                            '.Friday': ({ctx}) => {
                                ctx.init(Friday, {}, ctx.leaf);
                            },
                        };
                        ctx.matchNextSib = true;
                    },


                })
            </script>
        </template>
        <div id="target2"></div>
        <script type="module">
            import { init } from '../trans-render-init.js';
            import { interpolate } from '../string-interpolate.js';
            init(Main, {
                Day1: 'Monday', Day2: 'Tuesday', Day3: 'Wednesday', Day4: 'Thursday', Day5: 'Friday',
                Day6: 'Saturday', Day7: 'Sunday',
                interpolate: interpolate
            }, target2);
        </script>
    </div>
</body>

</html>