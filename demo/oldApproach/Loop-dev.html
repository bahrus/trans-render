<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <div>
      <template id="itemTemplate">
        <li></li>
      </template>
      <template id="list">
        <ul id="container"></ul>
        <button id="addItems">Add items</button>
        <button id="removeItems">Remove items</button>
      </template>
      <div id="target"></div>

      <script type="module">
        import { init } from '../init.js';
        import { repeat } from '../repeat.js';
        import {update} from '../update.js';
        const options = {matchNext: true};
        const itemTransform = {
            li: ({ idx }) => 'Hello ' + idx,
        };
        const ctx = init(list, {
            Transform: {
                ul: ({ target, ctx }) =>  repeat(itemTemplate, ctx, 10, target, itemTransform)
            }
        }, target, options);
        ctx.update = update;
        addItems.addEventListener('click', e => {
            repeat(itemTemplate, ctx, 15, container, itemTransform);
        });
        removeItems.addEventListener('click', e =>{
            repeat(itemTemplate, ctx, 5, container);
        })
      </script>
    </div>
  </body>
</html>
